<!DOCTYPE html>
<html>
<head>
<title>Admin</title>

<style>
	body
	{
		color:rgb(0,64,128)  ;
		width: 80%;
		position: absolute;
		margin: 0 auto;
		left: 10%;
	}
	
	topBanner
	{
		background-color:rgb(102,204,0) ;
		color:rgb(0,64,128)  ;
		font-size:70pt;
		text-align: center;
		float:left;
		width:100%;
		
		
	}
	
	form
	{
		padding: 1em;
	}

</style>
<script>

</script>
</head>


<body>
<topBanner>
Events
</topBanner>

Add event<br>

<input type="text" name="event_id" id="Eevent_id">event_id<br>
<input type="text" name="title" id="Etitle">title<br>
<input type="text" name="venue" id="Evenue">venue<br>
<input type="date" name="date" id="Edate">date<br>
<input type="text" name="url" id="Eurl">url<br>
<input type="text" name="blurb" id="Eblurb">blurb<br>
<button id="submitEvent">Submit</button>

<br><br>
Add venue<br>

<input type="text" id="Vname">name<br>
<input type="text" id="Vpostcode">postcode<br>
<input type="text" id="Vtown">town<br>
<input type="text" id="Vurl">url<br>
<input type="text" id="Vicon">icon<br>
<button id="submitVenue">Submit</button>
<br>
<br>
<button id="reset">reset</button>
</body>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
	$(document).ready(function()
	{
		var auth_token=document.cookie.toString().substring(11);
		
		$("#reset").click(function()
		{
			
			$.post("/resetEvents");
			$.post("/resetVenues");
		}); 
		
		$("#submitVenue").click(function()
		{
			console.log("submitign form");
			event.preventDefault();
			var newVenue = {
				"auth_token":auth_token,
				"name":$("#Vname").val(),
				"postcode":$("#Vpostcode").val(),
				"town":$("#Vtown").val(),
				"url":$("#Vurl").val(),
				"icon":$("#Vicon").val()			
			}
			
			url = "/venues/add?"
				+ "auth_token=" + auth_token + "&"+
				+ "name=" + newVenue.name +  "&"+
				+ "postcode="+ newVenue.postcode + "&"
				+ "town="+ newVenue.town + "&"
				+ "url="+ newVenue.url + "&"
				+ "icon="+ newVenue.icon
				
			console.log("post url:"+url);
			$.post(url);
		}); 
		
		$("#submitEvent").click(function()
		{
			console.log("submitign form2");
			event.preventDefault();
			var newEvent = {
				"auth_token":auth_token,
				"event_id":$("#Eevent_id").val(),
				"title":$("#Etitle").val(),
				"venue_id":$("#Evenue").val(),
				"date":$("#Edate").val(),
				"url":$("#Eurl").val(),
				"blurb":$("#Eblurb").val()		
			}
			
			url = "/events/add?" 
				+ "auth_token=" + auth_token +  "&"+
				+ "event_id=" + newEvent.event_id + "&"
				+ "title="+ newEvent.title + "&"
				+ "venue_id="+ newEvent.venue_id + "&"
				+ "date="+ newEvent.date + "&"
				+ "url=" + newEvent.url + "&"
				+ "blurb="+ newEvent.blurb

			console.log("post url:"+url);
			$.post(url,"", function(data) {
			alert(JSON.stringify(data));    
			});
		});
		
		
	}); 
	
	
	
</script>
</html>